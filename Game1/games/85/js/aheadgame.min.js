(function(){var e=function(){var a=Date.now(),c=a,b=0,g=Infinity,d=0,e=0,i=Infinity,f=0,j=0,r=0,s=document.createElement("div");s.id="stats";s.addEventListener("mousedown",function(a){a.preventDefault();w(++r%2)},!1);s.style.cssText="width:80px;opacity:0.9;cursor:pointer";var m=document.createElement("div");m.id="fps";m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";s.appendChild(m);var q=document.createElement("div");q.id="fpsText";q.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
q.innerHTML="FPS";m.appendChild(q);var h=document.createElement("div");h.id="fpsGraph";h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(m.appendChild(h);74>h.children.length;){var u=document.createElement("span");u.style.cssText="width:1px;height:30px;float:left;background-color:#113";h.appendChild(u)}var k=document.createElement("div");k.id="ms";k.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";s.appendChild(k);var o=document.createElement("div");
o.id="msText";o.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";o.innerHTML="MS";k.appendChild(o);var v=document.createElement("div");v.id="msGraph";v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(k.appendChild(v);74>v.children.length;)u=document.createElement("span"),u.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(u);var w=function(a){r=a;switch(r){case 0:m.style.display=
"block";k.style.display="none";break;case 1:m.style.display="none",k.style.display="block"}};return{REVISION:11,domElement:s,setMode:w,begin:function(){a=Date.now()},end:function(){var m=Date.now();b=m-a;g=Math.min(g,b);d=Math.max(d,b);o.textContent=b+" MS ("+g+"-"+d+")";var u=Math.min(30,30-30*(b/200));v.appendChild(v.firstChild).style.height=u+"px";j++;m>c+1E3&&(e=Math.round(1E3*j/(m-c)),i=Math.min(i,e),f=Math.max(f,e),q.textContent=e+" FPS ("+i+"-"+f+")",u=Math.min(30,30-30*(e/100)),h.appendChild(h.firstChild).style.height=
u+"px",c=m,j=0);return m},update:function(){a=this.end()}}};(function(){var a={},c=window,b=c.document,g;a.disabled=!1;a.set=function(){};a.get=function(){};a.remove=function(){};a.clear=function(){};a.transact=function(c,b,h){var g=a.get(c);null==h&&(h=b,b=null);"undefined"==typeof g&&(g=b||{});h(g);a.set(c,g)};a.getAll=function(){};a.serialize=function(a){return JSON.stringify(a)};a.deserialize=function(a){if("string"==typeof a)try{return JSON.parse(a)}catch(c){return a||void 0}};var d;try{d="localStorage"in
c&&c.localStorage}catch(e){d=!1}if(d)g=c.localStorage,a.set=function(c,b){return void 0===b?a.remove(c):(g.setItem(c,a.serialize(b)),b)},a.get=function(c){return a.deserialize(g.getItem(c))},a.remove=function(a){g.removeItem(a)},a.clear=function(){g.clear()},a.getAll=function(){for(var c={},b=0;b<g.length;++b){var h=g.key(b);c[h]=a.get(h)}return c};else if(b.documentElement.addBehavior){var i,f;try{f=new ActiveXObject("htmlfile"),f.open(),f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),
f.close(),i=f.w.frames[0].document,g=i.createElement("div")}catch(j){g=b.createElement("div"),i=b.body}var c=function(c){return function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(g);i.appendChild(g);g.addBehavior("#default#userData");g.load("localStorage");b=c.apply(a,b);return i.removeChild(g),b}},r=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=c(function(c,b,h){return b=b.replace(r,"___"),void 0===h?a.remove(b):(c.setAttribute(b,a.serialize(h)),c.save("localStorage"),
h)});a.get=c(function(c,b){return b=b.replace(r,"___"),a.deserialize(c.getAttribute(b))});a.remove=c(function(a,c){c=c.replace(r,"___");a.removeAttribute(c);a.save("localStorage")});a.clear=c(function(a){var c=a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var h=0,b;b=c[h];h++)a.removeAttribute(b.name);a.save("localStorage")});a.getAll=c(function(c){for(var b=c.XMLDocument.documentElement.attributes,h={},g=0,l;l=b[g];++g){var d=l.name.replace(r,"___");h[l.name]=a.deserialize(c.getAttribute(d))}return h})}try{a.set("__storejs__",
"__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=!0),a.remove("__storejs__")}catch(s){a.disabled=!0}a.enabled=!a.disabled;"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(a):this.store=a})();var d,b=b||{};d=function(){return{inst:null,get:function(){this.inst||(this.inst=new e,this.inst.setMode(0),this.inst.domElement.style.position="absolute",this.inst.domElement.style.left="0px",this.inst.domElement.style.top="0px",document.body.appendChild(this.inst.domElement));
return this.inst}}.get()};b.Scene=function(a){this.world=a;this.container=new PIXI.DisplayObjectContainer;this.onInit=function(){};this.onUpdate=function(){};this.onDestroy=function(){}};b.World=function(a){var c,b,g=null,e=0,p=null,i=this,f,j=!1,p=a||{};if(!p.canvas)throw"You need to specify a canvas.";this.stage=null;this.width=p.width||320;this.height=p.height||480;a=p.bgColor||0;p.stats&&(b=d());p=p.canvas;this.stage=new PIXI.Stage(a,!0);c=PIXI.autoDetectRenderer(this.width,this.height,p);this.run=
function(){e=(new Date).getTime();requestAnimFrame(f)};this.pause=function(){j=!0};this.unpause=function(){e=(new Date).getTime();j=!1;requestAnimFrame(f)};this.setScene=function(a){g&&g.onDestroy(i);g=a;g.onInit(i)};f=function(){if(!j){var a=(new Date).getTime()-e;e=(new Date).getTime();b&&b.begin();requestAnimFrame(f);g&&g.onUpdate(a);c.render(i.stage);b&&b.end()}}};b.CustomProgressBar=function(a){var c,b,g,d,e,i,f,j,r,s,m,q,h,u=0,k,o,v=this,a=a||{};f=a.canvas;k=1/a.numItems;h=a.borderWidth||10;
m=f.width-20;q=a.height||100;r=(f.width-m)/2;s=f.height/2-q/2;_fnOnReady=a.onReady||null;o=a.autorun||!1;c=f.width/2-q/4;b=f.height/2-q/4;g=f.width/2+q/4;d=f.height/2;e=f.width/2-q/4;i=f.height/2+q/4;if(!f)throw"Canvas is missing.";j=f.getContext("2d");this.step=function(){u++;v.render()};this.enableOnClick=function(){f.addEventListener("click",function(a){_fnOnReady&&_fnOnReady.call(this,a)},!1)};this.render=function(){j.fillStyle="#FFFFFF";j.fillRect(r,s,m,q);j.fillStyle="#000000";j.fillRect(r+
h,s+h,m-2*h,q-2*h);j.fillRect(r,s,h,h);j.fillRect(r,s+q-h,h,h);j.fillRect(r+m-h,s,h,h);j.fillRect(r+m-h,s+q-h,h,h);j.fillStyle="#FFFFFF";j.fillRect(r+2*h,s+2*h,u*k*(m-4*h),q-4*h);1==k*u&&(o?setTimeout(function(){_fnOnReady&&_fnOnReady.call(this)},250):(j.fillStyle="#000000",j.beginPath(),j.moveTo(c,b),j.lineTo(g,d),j.lineTo(e,i),j.closePath(),j.fill()))};this.render()};b.Button=function(a){PIXI.DisplayObjectContainer.call(this);var a=a||{},c=a.init||function(){},b=a.hover||function(){},g=a.tap||function(){},
d=a.cancel||function(){},e,i,f;this.onInit=function(){c.bind(this)();this.setInteractive(!0);this.enable()};e=function(a){b.bind(this)(a)};i=function(a){g.bind(this)(a)};f=function(a){d.bind(this)(a)};this.enable=function(){this.click=this.tap=i;this.mouseover=e;this.mouseout=f};this.disable=function(){this.mouseout=this.mouseover=this.click=this.tap=null};this.onInit()};b.Button.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);b.Button.constructor=b.Button;b.ParticleEmitter=function(a){var c=
{linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return 0.5>a?2*a*a:-1+(4-2*a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return 0.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return 0.5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*
a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return 0.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},d=a.maxParticles||100,g=a.lifeTime||1E3,e=1/g,p=a.textures,i=c[a.easing]||c.linear,f=[],j=0,r=(new Date).getTime(),s=a.onInit||function(){},m=a.onUpdate||function(){},q=a.onDone||function(){};if(!p)throw"No texture defined.";PIXI.DisplayObjectContainer.call(this);for(a=0;a<d;a++)f[a]=new b.Particle(p[Math.random()*p.length|0]),f[a].visible=!1,this.addChild(f[a]);this.emit=
function(a,b){for(var c,g=a||1;g--;)c=f[j++],c.lifeTime=0,s(c,b),c.visible=!0,j===d&&(j=0)};this.update=function(){for(var a=d,c=(new Date).getTime(),b=r;a--;)f[a].visible&&(f[a].lifeTime+=c-b,f[a].lifeTime>g?(f[a].visible=!1,q(f[a])):m(f[a],i(e*f[a].lifeTime)));r=c}};b.ParticleEmitter.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);b.ParticleEmitter.constructor=b.ParticleEmitter;b.Particle=function(a){PIXI.Sprite.call(this,a);this.anchor.x=this.anchor.y=0.5;this.lifeTime=0};b.Particle.prototype=
Object.create(PIXI.Sprite.prototype);b.Particle.prototype.constructor=b.Particle;b.Audio=function(a){var c,a=a||{},b,g,d,e,i,f;c=a.enabled||!0;g=a.autoplay||!1;d=a.loop||!1;e=a.volume||0.5;i=a.onload||null;f=a.onloaderror||null;a=a.urls;if(!a)throw"No audio urls found";b=new Howl({urls:a,autoplay:g,loop:d,volume:e,onload:function(){i&&i()},onloaderror:function(){f&&f()}});this.play=function(){b.play()};this.pause=function(){b.pause()};this.stop=function(){b.stop()};this.enable=function(){c=!0};this.disable=
function(){c=!1};this.isEnabled=function(){return c}};b.Utils={};b.Utils.pad=function(a,c){a+="";return a.length<c?b.Utils.pad("0"+a,c):a};b.Utils.save=function(a,b){store.set(a,b)};b.Utils.load=function(a){return store.get(a)};b.Utils.loadAll=function(){return store.getAll()};b.Utils.createCanvas=function(a){var b=document.createElement("canvas"),a=a||{};b.setAttribute("width",a.width||320);b.setAttribute("height",a.height||480);b.style.display="block";a.id&&csv.setAttribute("id",a.id);return b};
b.Utils.stretchCanvas=function(a){var b,d;d=a.width/a.height;b=window.innerHeight;d=~~(b*d);d>window.innerWidth?(d=window.innerWidth,b=d*(a.height/a.width)|0,a.style.margin=(window.innerHeight-b)/2|0):a.style.margin="0px auto";a.style.width=d+"px";a.style.height=b+"px"};b.Utils.setOnResizeHandler=function(a){window.addEventListener("resize",function(b){return a(b)},!1);a()};b.Utils.fullscreenAvailable=function(){return null===document.cancelFullScreen||null===document.mozCancelFullScreen||null===
document.webkitCancelFullScreen?!1:!0};b.Utils.isFullscreen=function(){return null===document.fullscreenElement||null===document.mozFullScreenElement||null===document.webkitFullscreenElement?!1:!0};b.Utils.startFullscreen=function(a){a.requestFullScreen?a.requestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)};b.Utils.stopFullscreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?
document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()};b.Utils.Device=function(){this.ie=this.firefox=this.epiphany=this.chrome=this.arora=this.pointerLock=this.css3D=this.mspointer=this.touch=this.worker=this.webGL=this.localStorage=this.fileSystem=this.file=this.canvas=this.windows=this.macOS=this.linux=this.chromeOS=this.android=this.iOS=this.desktop=this.patchAndroidClearRectBug=!1;this.ieVersion=0;this.iPad=this.iPhone4=this.iPhone=this.webm=this.m4a=
this.wav=this.mp3=this.opus=this.ogg=this.webAudio=this.audioData=this.webApp=this.safari=this.opera=this.midori=this.mobileSafari=!1;this.pixelRatio=0;this._checkAudio();this._checkBrowser();this._checkCSS3D();this._checkDevice();this._checkFeatures();this._checkOS()};b.Utils.Device.prototype={_checkOS:function(){var a=navigator.userAgent;/Android/.test(a)?this.android=!0:/CrOS/.test(a)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?this.iOS=!0:/Linux/.test(a)?this.linux=!0:/Mac OS/.test(a)?this.macOS=
!0:/Windows/.test(a)&&(this.windows=!0);if(this.windows||this.macOS||this.linux)this.desktop=!0},_checkFeatures:function(){this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(a){this.localStorage=!1}this.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob;this.fileSystem=!!window.requestFileSystem;var b;try{b=!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(d){b=!1}this.webGL=
b;this.worker=!!window.Worker;if("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)this.touch=!0;window.navigator.msPointerEnabled&&(this.mspointer=!0);this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document},_checkBrowser:function(){var a=navigator.userAgent;/Arora/.test(a)?this.arora=!0:/Chrome/.test(a)?this.chrome=!0:/Epiphany/.test(a)?this.epiphany=!0:/Firefox/.test(a)?this.firefox=!0:/Mobile Safari/.test(a)?
this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1)):/Midori/.test(a)?this.midori=!0:/Opera/.test(a)?this.opera=!0:/Safari/.test(a)&&(this.safari=!0);navigator.standalone&&(this.webApp=!0)},_checkAudio:function(){this.audioData=!!window.Audio;this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var a=document.createElement("audio");try{if(a.canPlayType){a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0);a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,
"")&&(this.opus=!0);a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0);a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0);if(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))this.m4a=!0;a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0)}}catch(b){}},_checkDevice:function(){this.pixelRatio=window.devicePixelRatio||1;this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone");this.iPhone4=2==this.pixelRatio&&
this.iPhone;this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad")},_checkCSS3D:function(){var a=document.createElement("p"),b,d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var g in d)void 0!==a.style[g]&&(a.style[g]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(d[g]));document.body.removeChild(a);this.css3D=void 0!==b&&0<b.length&&
"none"!==b},canPlayAudio:function(a){return"mp3"==a&&this.mp3||"ogg"==a&&(this.ogg||this.opus)||"m4a"==a&&this.m4a||"wav"==a&&this.wav||"webm"==a&&this.webm?!0:!1},isConsoleOpen:function(){return window.console&&window.console.firebug?!0:window.console?(console.profile(),console.profileEnd(),console.clear&&console.clear(),0<console.profiles.length):!1}};this.K=b}).call(this);function HowtoScene(e){K.Scene.call(this,e);var d=this,b,a,c,l,g,t;this.ID="HOWTO";this.onInit=function(){var d;t=1;b=new PIXI.DisplayObjectContainer;d=new PIXI.Sprite(PIXI.Texture.fromFrame("headerHowto.png"));b.addChild(d);a=new PIXI.BitmapText("How To Play 1/3",{font:"40px PaytoneOneStart",align:"center"});a.position.x=d.width/2-a.width/2;a.position.y=d.height/2-a.height/2-8;b.addChild(d);b.addChild(a);b.position.y=0-b.height;this.container.addChild(b);c=new Polaroid(PIXI.Texture.fromFrame("howto1.png"),
"Tap the screen","to shoot the yummy",-0.1);l=new Polaroid(PIXI.Texture.fromFrame("howto2.png"),"Hit a yummy on the plate","to make them stick together",0);g=new Polaroid(PIXI.Texture.fromFrame("howto3.png"),"The game is over when","one yummy is off the plate",0.1);c.pivot.x=l.pivot.x=g.pivot.x=c.width/2;c.pivot.y=l.pivot.y=g.pivot.y=c.height/2;c.position.x=this.world.width+c.width;l.position.x=this.world.width+l.width;g.position.x=this.world.width+g.width;c.position.y=l.position.y=g.position.y=260;
this.container.addChild(c);this.container.addChild(l);this.container.addChild(g);this.world.stage.addChild(this.container);(new TWEEN.Tween(b.position)).to({y:40},1E3).easing(TWEEN.Easing.Back.Out).start();c.fadeIn(i)};this.onUpdate=function(){TWEEN.update()};this.onDestroy=function(){this.world.stage.mousedown=this.world.stage.touchstart=null;this.world.stage.removeChild(this.container)};var p=function(){d.world.stage.mousedown=d.world.stage.touchstart=null;1==t?(a.setText("How To Play 2/3"),l.fadeIn(i),
t=2):2==t?(a.setText("How To Play 3/3"),g.fadeIn(i),t=3):f()},i=function(){d.world.stage.mousedown=d.world.stage.touchstart=p},f=function(){(new TWEEN.Tween(b.position)).to({y:-100},1E3).easing(TWEEN.Easing.Back.In).onComplete(function(){d.world.setScene(new IngameScene(d.world))}).start();c.fadeOut(0);l.fadeOut(250);g.fadeOut(500)}}HowtoScene.prototype=Object.create(K.Scene.prototype);HowtoScene.prototype.constructor=HowtoScene;
function Polaroid(e,d,b,a){PIXI.DisplayObjectContainer.call(this);this.rot=a;e=new PIXI.Sprite(e);this.addChild(e);this.width=e.width;this.height=e.height;d=new PIXI.BitmapText(""+d,{font:"22px MarckScript",align:"center"});d.position.x=e.width/2-d.width/2-4;d.position.y=215;this.addChild(d);b=new PIXI.BitmapText(""+b,{font:"22px MarckScript",align:"center"});b.position.x=e.width/2-b.width/2-4;b.position.y=235;this.addChild(b);this.fadeIn=function(a){(new TWEEN.Tween(this.position)).to({x:160},1E3).easing(TWEEN.Easing.Quadratic.Out).start();
(new TWEEN.Tween(this)).to({rotation:this.rot},1E3).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){a&&a()}).start()};this.fadeOut=function(a){(new TWEEN.Tween(this.position)).to({x:-200},500).easing(TWEEN.Easing.Quadratic.Out).delay(a).start();(new TWEEN.Tween(this)).to({rotation:this.rot},500).easing(TWEEN.Easing.Quadratic.Out).delay(a).start()}}Polaroid.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);Polaroid.prototype.constructor=Polaroid;function IngameOverlay(){PIXI.DisplayObjectContainer.call(this);var e,d,b=this;e=new PIXI.Sprite(PIXI.Texture.fromImage("assets/overlay.jpg"));d=new PIXI.DisplayObjectContainer;d.addChild(new PIXI.Sprite(PIXI.Texture.fromFrame("gameoverBar.png")));d.position.x=0;this.addChild(e);this.addChild(d);this.visible=!1;this.show=function(a,b,l){a=new PIXI.BitmapText(""+a,{font:"40px PaytoneOneStart",align:"center"});a.position.x=(Game.world.width-a.width)/2;a.position.y=2;b=new PIXI.BitmapText(""+b,{font:"36px PaytoneOneStart",
align:"center"});b.position.x=(Game.world.width-b.width)/2;b.position.y=32;l=new PIXI.BitmapText(""+l,{font:"40px PaytoneOneStart",align:"center"});l.position.x=(Game.world.width-l.width)/2;l.position.y=50;d.addChild(a);d.addChild(b);d.addChild(l);e.alpha=0;(new TWEEN.Tween(e)).to({alpha:0.6},500).easing(TWEEN.Easing.Linear.None).start();d.position.y=-300;(new TWEEN.Tween(d.position)).to({y:160},1E3).easing(TWEEN.Easing.Back.Out).start();this.visible=!0};this.hide=function(a){(new TWEEN.Tween(e)).to({alpha:0},
500).easing(TWEEN.Easing.Linear.None).start();(new TWEEN.Tween(d.position)).to({y:-300},1E3).onComplete(function(){b.visible=!1;a()}).easing(TWEEN.Easing.Back.Out).start()}}IngameOverlay.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);IngameOverlay.prototype.constructor=IngameOverlay;
function IngameIntro(){PIXI.DisplayObjectContainer.call(this);var e,d,b=this,a,c,l;e=new PIXI.Sprite(PIXI.Texture.fromImage("assets/overlay.jpg"));d=new PIXI.DisplayObjectContainer;d.addChild(new PIXI.Sprite(PIXI.Texture.fromFrame("gameoverBar.png")));d.position.x=0;this.addChild(e);this.addChild(d);this.visible=!1;this.show=function(b,t,p){this.visible=!0;a=new PIXI.BitmapText(b,{font:"40px PaytoneOneStart",align:"center"});a.position.x=(Game.world.width-a.width)/2|0;a.position.y=2;c=new PIXI.BitmapText(t,
{font:"36px PaytoneOneStart",align:"center"});c.position.x=(Game.world.width-c.width)/2|0;c.position.y=28;l=new PIXI.BitmapText(p,{font:"30px PaytoneOneStart",align:"center"});l.position.x=(Game.world.width-l.width)/2|0;l.position.y=56;d.addChild(a);d.addChild(c);d.addChild(l);e.alpha=0;(new TWEEN.Tween(e)).to({alpha:0.6},500).easing(TWEEN.Easing.Linear.None).start();d.position.y=-300;(new TWEEN.Tween(d.position)).to({y:160},1E3).easing(TWEEN.Easing.Back.Out).start()};this.hide=function(a){(new TWEEN.Tween(e)).to({alpha:0},
500).easing(TWEEN.Easing.Linear.None).start();(new TWEEN.Tween(d.position)).to({y:-300},1E3).onComplete(function(){b.visible=!1;a()}).easing(TWEEN.Easing.Back.Out).start()}}IngameIntro.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);IngameIntro.prototype.constructor=IngameIntro;
function PauseOverlay(e,d){PIXI.DisplayObjectContainer.call(this);var b,a,c,l=this;b=new PIXI.Sprite(PIXI.Texture.fromImage("assets/overlay.jpg"));a=new PIXI.DisplayObjectContainer;c=new PIXI.BitmapText("Pause",{font:"58px PaytoneOneStart",align:"center"});c.position.x=(Game.world.width-c.width)/2;c.position.y=20;a.addChild(c);a.position.x=0;a.position.y=130;c=new K.Button({init:function(){var a,b;a=new PIXI.Sprite(PIXI.Texture.fromFrame("button.png"));b=new PIXI.BitmapText("Continue",{font:"40px PaytoneOneStart",
align:"center"});a.addChild(b);b.position.x=a.width/2-b.width/2-6;b.position.y=a.height/2-b.height/2-6;b=new PIXI.RenderTexture(a.width,a.height);b.render(a);this.skin=new PIXI.Sprite(b);this.skin.anchor.x=this.skin.anchor.y=0.5;this.addChild(this.skin);this.position={x:170,y:110}},hover:function(){this.skin.scale={x:1.05,y:1.05}},tap:function(){l.resume()},cancel:function(){this.skin.scale={x:1,y:1}}});a.addChild(c);c=new K.Button({init:function(){var a,b;a=new PIXI.Sprite(PIXI.Texture.fromFrame("button.png"));
b=new PIXI.BitmapText("Quit",{font:"40px PaytoneOneStart",align:"center"});a.addChild(b);b.position.x=a.width/2-b.width/2-6;b.position.y=a.height/2-b.height/2-6;b=new PIXI.RenderTexture(a.width,a.height);b.render(a);this.skin=new PIXI.Sprite(b);this.skin.anchor.x=this.skin.anchor.y=0.5;this.addChild(this.skin);this.position={x:170,y:160}},hover:function(){this.skin.scale={x:1.05,y:1.05}},tap:function(){l.quit()},cancel:function(){this.skin.scale={x:1,y:1}}});a.addChild(c);this.addChild(b);this.addChild(a);
this.visible=!1;this.show=function(){this.visible=!0;b.alpha=0.6};this.resume=function(){this.visible=!1;e&&e()};this.quit=function(){this.visible=!1;d&&d()}}PauseOverlay.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PauseOverlay.prototype.constructor=PauseOverlay;function IngameScene(e,d){K.Scene.call(this,e);var b,a,c,l,g,t,p,i,f,j,r,s,m,q,h,u,k=null,o,v,w,n=this,z,x={centerX:160,centerY:130,radius:80,rotation:0.02};this.ID="INGAME";this.onInit=function(){var a;b=[];t=c=l=p=0;f=z=!1;"arcade"!=d&&(k=new Quest(Game.quest));u=!1;v=new PIXI.Sprite(PIXI.Texture.fromFrame("tischdecke.png"));v.anchor.x=v.anchor.y=0.5;v.position.x=160;v.position.y=610;this.container.addChild(v);(new TWEEN.Tween(v.position)).to({y:510},1E3).delay(250).easing(TWEEN.Easing.Back.Out).start();
a=new PIXI.Sprite(PIXI.Texture.fromFrame("plate.png"));a.anchor.x=a.anchor.y=0.5;a.position.x=this.world.width/2;a.position.y=x.centerY;j=new PIXI.DisplayObjectContainer;j.position.y=-200;j.addChild(a);this.container.addChild(j);(new TWEEN.Tween(j.position)).to({y:0},1E3).easing(TWEEN.Easing.Back.Out).start();null!=k?i=null!=k.yummies?new IngameHeader("Time","Yummies"):new IngameHeader("Time","Score"):(i=new IngameHeader("High","Score"),i.setLeftValue(""+Game.highscore));this.container.addChild(i);
i.fadeIn(function(){Game.device.touch?n.world.stage.touchstart=E:n.world.stage.mousedown=E});A(0,0);F(0);o=new PIXI.Sprite(PIXI.Texture.fromFrame("firstyummy.png"));o.anchor.x=o.anchor.y=0.5;o.position.x=x.centerX;o.position.y=x.centerY;o.velocityX=-1*Math.random()+2;o.velocityY=-8*Math.random();o.r=20;G(o);j.addChild(o);B();w=new IngameOverlay;this.container.addChild(w);m=new IngameIntro;a=!0;this.container.addChild(m);null!=k?null!=k.yummies?(m.show("Challenge "+(Game.quest+1)+"/"+k.total,"Get yummies on plate!",
"Yummies: "+k.yummies+" - Time: "+k.time),a=!1):m.show("Challenge "+(Game.quest+1)+"/"+k.total,"Reach score in time!","Score: "+k.score+" - Time: "+k.time):m.show("Arcade Mode","Improve your score!","Current High: "+Game.highscore);r=new K.ParticleEmitter({lifeTime:1E3,maxParticles:100,easing:"easeOutQuad",textures:[PIXI.Texture.fromImage("starparticle-yellow.png")],onInit:function(a,b){a.posX=b.x;a.posY=b.y;a.position.x=a.posX;a.position.y=a.posY;a.dx=Math.random()*200-100;a.velY=Math.random()*-6;
a.g=0.2;a.alpha=1},onUpdate:function(a,b){a.velY=a.velY+a.g;a.position.x=a.posX+a.dx*b;a.position.y=a.position.y+a.velY;a.rotation=a.rotation+0.2;a.alpha=1-b}});this.container.addChild(r);s=new K.ParticleEmitter({lifeTime:1500,maxParticles:2,easing:"easeOutQuad",textures:[PIXI.Texture.fromImage("emptysprite.png")],onInit:function(a,b){a.posX=b.x;a.posY=b.y;a.position.x=a.posX;a.position.y=a.posY;a.alpha=1;if(a.textField)a.textField.setText(""+b.text);else{a.textField=new PIXI.BitmapText(b.text,{font:"PaytoneOneOutlined"});
a.addChild(a.textField)}},onUpdate:function(a,b){a.position.y=a.posY-10*b;a.alpha=1-b}});a&&this.container.addChild(s);q=new K.Button({init:function(){this.icon=new PIXI.Sprite(PIXI.Texture.fromFrame("pausebutton.png"));this.addChild(this.icon);this.position.y=-80;this.alpha=0.8;this.position.x=Game.world.width+this.icon.width;this.position.y=40},hover:function(){this.icon.scale={x:1.05,y:1.05}},tap:function(){n.pause()},cancel:function(){this.icon.scale={x:1,y:1}}});q.disable();this.container.addChild(q);
(new TWEEN.Tween(q.position)).to({x:270},1E3).easing(TWEEN.Easing.Cubic.Out).start();h=new PauseOverlay(this.onResume,this.onQuit);this.container.addChild(h);this.world.stage.addChild(this.container)};this.pause=function(){u=!0;n.world.stage.mousedown=n.world.stage.touchstart=null;q.disable();h.show()};this.onResume=function(){q.enable();u=!1;Game.device.touch?n.world.stage.touchstart=y:n.world.stage.mousedown=y};this.onQuit=function(){n.world.setScene(new StartScene(n.world))};this.onDestroy=function(){this.world.stage.removeChild(this.container)};
var C=function(){var a=b;if(0<x.rotation)for(var c=0;c<a.length;c++)a[c].rotation+=x.rotation;else{for(c=0;c<a.length;c++)a[c].position.x+=a[c].velocityX,a[c].position.y+=a[c].velocityY,a[c].velocityY+=0.45;o.position.x+=o.velocityX;o.position.y+=o.velocityY;o.velocityY+=0.15}TWEEN.update();r.update();s.update()},F=function(c){if(null==k)return!1;k.timeLeft-=c;i.setLeftValue(k.timeLeft/1E3|0);if(0>k.timeLeft){a.visible=!1;n.world.stage.mousedown=n.world.stage.touchstart=null;q.disable();t=2;D(!1);
for(c=0;c<b.length;c++)b[c].velocityY=-4*Math.random();n.onUpdate=C}},I=function(d){if(!u){var h=b,e=a;F(d);for(var f=0;f<h.length;f++)h[f].rotation+=x.rotation;if(0===t)g-=Math.PI/(4*d),l+=Math.PI/(5*d),c=(180-120*Math.sin(l))/360*Math.PI,e.position.x=160+50*Math.cos(c),e.position.y=480-50*Math.sin(c);else if(1===t){e.position.x+=e.velocityX;e.position.y+=e.velocityY;e.velocityY+=0.45;e.rotation+=0.02;for(var d=!1,i,j=b,m=a,o=j.length;o--;)if(h=m.position.x-j[o].worldTransform[2],f=m.position.y-
j[o].worldTransform[5],i=m.r+j[o].r,h*h+f*f<=i*i){d=!0;m.rotation=0;m.pivot.x=j[o].position.x-m.position.x;m.pivot.y=j[o].position.y-m.position.y;m.position.x=j[0].position.x;m.position.y=j[0].position.y;break}if(d)if(r.emit(50,{x:e.worldTransform[2],y:e.worldTransform[5]-10}),G(e)){if(d=10+Math.max(0,5*(g/4|0)),s.emit(1,{x:e.worldTransform[2],y:e.worldTransform[5]-10,text:"+"+d}),A(d,1),B(),t=0,k&&k.isComepleted()){Game.saveQuest(k.no);n.world.stage.mousedown=n.world.stage.touchstart=null;q.disable();
t=2;D(!0);for(f=0;f<b.length;f++)b[f].velocityY=-4*Math.random();n.onUpdate=C}}else{B();n.world.stage.mousedown=n.world.stage.touchstart=null;q.disable();t=2;e=Game.saveHighscore(p);D(e);for(f=0;f<b.length;f++)b[f].velocityY=-4*Math.random();n.onUpdate=C}else if(-30>e.position.x||320<e.position.x||520<e.position.y)t=0,0<p&&(A(-10,0),s.emit(1,{x:Math.max(10,Math.min(e.position.x,290)),y:Math.min(460,e.position.y),text:"-10"})),e.rotation=0}else TWEEN.update();r.update();s.update()}};this.onUpdate=
function(){TWEEN.update()};var A=function(a,b){if(null==k){var c;p+=a;p=Math.max(0,p);c=K.Utils.pad(p,4);i.setRightValue(c)}else null==k.yummies?(k.currentScore+=a,k.currentScore=Math.max(0,k.currentScore),i.setRightValue(k.currentScore+"/"+k.score)):(k.currentYummies+=b,i.setRightValue(k.currentYummies+"/"+k.yummies))},J=function(){TWEEN.update()},E=function(){n.world.stage.mousedown=n.world.stage.touchstart=null;m.hide(function(){Game.device.touch?(n.world.stage.touchstart=y,n.world.stage.touchend=
H):(n.world.stage.mousedown=y,n.world.stage.mouseup=H);q.enable();n.onUpdate=I})},H=function(){z=!1},y=function(b){if(!(88>b.global.y&&41<b.global.y&&275<b.global.x))switch(t){case 0:if(z)break;b=a;t=1;z=!0;b.velocityX=18*Math.cos(c);b.velocityY=-18*Math.sin(c);break;case 2:n.world.stage.mousedown=n.world.stage.touchstart=null,q.disable(),n.onUpdate=J,w.hide(function(){f?n.world.setScene(new IngameScene(n.world,d)):n.world.setScene(new StartScene(n.world))})}},B=function(){a=new PIXI.Sprite(PIXI.Texture.fromFrame("yummy0"+
(Math.round(8*Math.random())+1)+".png"));a.rotation=0;a.velocityX=a.velocityY=a.positionX=a.positionY=0;a.anchor.x=a.anchor.y=0.5;a.position.x=a.position.y=-100;a.r=12;j.addChild(a);g=25},G=function(a){var c,d;c=a.worldTransform[2]-x.centerX;d=a.worldTransform[5]-x.centerY;c=Math.sqrt(c*c+d*d);b.push(a);return c>x.radius?!1:!0},D=function(a){a|=0;(new TWEEN.Tween(v.position)).to({y:620},1E3).easing(TWEEN.Easing.Back.In).delay(500).start();(new TWEEN.Tween(x)).to({rotation:0},2E3).easing(TWEEN.Easing.Quartic.Out).start();
"arcade"==d?a?i.fadeOut(function(){w.show("Game Over","New Highscore",""+p)}):i.fadeOut(function(){w.show("Game Over","Your Score:",""+p)}):a?k.no==k.total?i.fadeOut(function(){w.show("Challenge "+k.no+"/"+k.total,"All challenges succeeded.","Very well done!")}):(f=!0,i.fadeOut(function(){w.show("Challenge "+k.no+"/"+k.total,"Congratulation.","You made it!")})):i.fadeOut(function(){w.show("Challenge "+k.no+"/"+k.total,"Not completed.","Give it another try!")});(new TWEEN.Tween(q.position)).to({x:370},
1E3).easing(TWEEN.Easing.Cubic.In).start();(new TWEEN.Tween(j.position)).to({y:-200},1500).easing(TWEEN.Easing.Quartic.Out).delay(2E3).onComplete(function(){Game.device.touch?n.world.stage.touchstart=y:n.world.stage.mousedown=y}).start();a&&(new TWEEN.Tween({x:280})).to({x:40},500).easing(TWEEN.Easing.Linear.None).delay(2500).onUpdate(function(){r.emit(2,{x:this.x,y:230})}).start()}}IngameScene.prototype=Object.create(K.Scene.prototype);IngameScene.prototype.constructor=IngameScene;
function Quest(e){var d=[{time:120,yummies:1},{time:120,yummies:3},{time:120,yummies:5},{time:120,score:100},{time:90,score:300},{time:60,yummies:7},{time:60,yummies:10},{time:20,yummies:3},{time:10,score:50},{time:10,yummies:2},{time:60,yummies:14},{time:60,score:450},{time:30,yummies:10},{time:30,score:300},{time:60,score:575},{time:60,yummies:18},{time:10,yummies:3},{time:10,score:100},{time:90,score:700},{time:10,yummies:5},{time:90,yummies:25},{time:6,yummies:3},{time:120,score:750},{time:240,
score:850},{time:120,yummies:30}],e=Math.min(e,d.length-1);this.no=e+1;this.time=d[e].time;this.yummies=d[e].yummies?d[e].yummies:null;this.score=d[e].score?d[e].score:null;this.total=d.length;this.timeLeft=1E3*this.time;this.currentScore=this.currentYummies=0;this.isComepleted=null==this.yummies?function(){return this.currentScore>=this.score}:function(){return this.yummies<=this.currentYummies};this.isTimeUp=function(){return 0>=this.timeLeft}}
function IngameHeader(e,d){var b,a,c;PIXI.DisplayObjectContainer.call(this);this.position.x=0;this.position.y=-50;b=new PIXI.Sprite(PIXI.Texture.fromFrame("header.png"));b.position.x=0;b.position.y=0;this.addChild(b);b=new PIXI.BitmapText(e+":",{font:"PaytoneOne",align:"right"});b.position.x=15;b.position.y=-2;this.addChild(b);a=new PIXI.BitmapText("",{font:"PaytoneOne",align:"right"});a.position.x=65;a.position.y=-2;this.addChild(a);b=new PIXI.BitmapText(d+":",{font:"PaytoneOne",align:"right"});
b.position.x=175;b.position.y=-2;this.addChild(b);c=new PIXI.BitmapText("",{font:"PaytoneOne",align:"right"});c.position.x=248;c.position.y=-2;this.addChild(c);this.setLeftValue=function(b){a.setText(""+b)};this.setRightValue=function(a){c.setText(""+a)};this.fadeIn=function(a){(new TWEEN.Tween(this.position)).to({y:0},1250).delay(500).easing(TWEEN.Easing.Cubic.Out).onComplete(function(){a&&a()}).start()};this.fadeOut=function(a){(new TWEEN.Tween(this.position)).to({y:-50},1E3).easing(TWEEN.Easing.Cubic.In).onComplete(function(){a&&
a()}).delay(500).start()}}IngameHeader.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);IngameHeader.prototype.constructor=IngameHeader;function StartScene(e){K.Scene.call(this,e);var d=this,b,a,c,l,g,t,p,i,f;this.ID="START";this.onInit=function(){var e;t=new K.Button({init:function(){this.icon=new PIXI.Sprite(PIXI.Texture.fromFrame("helpbutton.png"));this.icon.anchor.x=1;this.icon.anchor.y=0;this.icon.position={x:d.world.width-4,y:4};this.addChild(this.icon);this.position.y=-80;this.alpha=0.8},hover:function(){this.icon.scale={x:1.05,y:1.05}},tap:function(){r()},cancel:function(){this.icon.scale={x:1,y:1}}});t.disable();this.container.addChild(t);
b=new PIXI.DisplayObjectContainer;a=new PIXI.Sprite(PIXI.Texture.fromFrame("sunburst.png"));a.anchor.x=a.anchor.y=0.5;a.position.x=this.world.width/2;a.position.y=133;b.addChild(a);e=new PIXI.Sprite(PIXI.Texture.fromFrame("logo.png"));e.anchor.x=e.anchor.y=0.5;e.position.x=this.world.width/2;e.position.y=133;b.position.y=-320;b.addChild(e);this.container.addChild(b);f=new PIXI.Sprite(PIXI.Texture.fromFrame("aheadwarelogo.png"));f.anchor.x=f.anchor.y=1;f.position.x=this.world.width-4;f.position.y=
this.world.height+1.5*f.height;this.container.addChild(f);p=new K.ParticleEmitter({lifeTime:3E3,maxParticles:100,easing:"easeOutQuad",textures:[PIXI.Texture.fromImage("yummy01.png"),PIXI.Texture.fromImage("yummy02.png"),PIXI.Texture.fromImage("yummy03.png"),PIXI.Texture.fromImage("yummy04.png"),PIXI.Texture.fromImage("yummy05.png"),PIXI.Texture.fromImage("yummy06.png"),PIXI.Texture.fromImage("yummy07.png"),PIXI.Texture.fromImage("yummy08.png"),PIXI.Texture.fromImage("yummy09.png")],onInit:function(a){a.position.x=
160*Math.random()+80;a.position.y=480;a.velX=-2*Math.random()+1;a.velY=-6*Math.random()-4;a.g=0.2;a.r=(-1*Math.random()+0.5)/10},onUpdate:function(a){a.velY+=a.g;a.position.x+=a.velX;a.position.y+=a.velY;a.rotation+=a.r}});this.container.addChild(p);i=2E3;c=new K.Button({init:function(){var a,b;a=new PIXI.Sprite(PIXI.Texture.fromFrame("button.png"));b=new Quest(1);b=new PIXI.BitmapText("Challenge "+(Game.quest+1)+"/"+b.total,{font:"40px PaytoneOneStart",align:"center"});a.addChild(b);b.position.x=
a.width/2-b.width/2-6;b.position.y=a.height/2-b.height/2-6;b=new PIXI.RenderTexture(a.width,a.height);b.render(a);this.skin=new PIXI.Sprite(b);this.skin.anchor.x=this.skin.anchor.y=0.5;this.addChild(this.skin);this.position={x:-160,y:280}},hover:function(){this.skin.scale={x:1.05,y:1.05}},tap:function(){j("challenge")},cancel:function(){this.skin.scale={x:1,y:1}}});c.disable();this.container.addChild(c);l=new K.Button({init:function(){var a,b;a=new PIXI.Sprite(PIXI.Texture.fromFrame("button.png"));
b=new PIXI.BitmapText("Arcade",{font:"40px PaytoneOneStart",align:"center"});a.addChild(b);b.position.x=a.width/2-b.width/2-6;b.position.y=a.height/2-b.height/2-6;b=new PIXI.RenderTexture(a.width,a.height);b.render(a);this.skin=new PIXI.Sprite(b);this.skin.anchor.x=this.skin.anchor.y=0.5;this.addChild(this.skin);this.position={x:480,y:330}},hover:function(){this.skin.scale={x:1.05,y:1.05}},tap:function(){j("arcade")},cancel:function(){this.skin.scale={x:1,y:1}}});l.disable();this.container.addChild(l);
g=new K.Button({init:function(){var a,b;a=new PIXI.Sprite(PIXI.Texture.fromFrame("button.png"));b=new PIXI.BitmapText("Buy license",{font:"40px PaytoneOneStart",align:"center"});a.addChild(b);b.position.x=a.width/2-b.width/2-6;b.position.y=a.height/2-b.height/2-6;b=new PIXI.RenderTexture(a.width,a.height);b.render(a);this.skin=new PIXI.Sprite(b);this.skin.anchor.x=this.skin.anchor.y=0.5;this.addChild(this.skin);this.position={x:-160,y:380}},hover:function(){this.skin.scale={x:1.05,y:1.05}},tap:function(){window.open(GameConfig.MORE_BUTTON_URL,
"_blank")},cancel:function(){this.skin.scale={x:1,y:1}}});g.disable();this.world.stage.addChild(this.container);s()};this.onUpdate=function(b){i-=b;0>i&&(p.emit(1),i=1E3*Math.random()+250|0);a.rotation+=b/6E3;TWEEN.update();p.update()};this.onDestroy=function(){this.world.stage.mousedown=this.world.stage.touchstart=null;this.world.stage.removeChild(this.container)};var j=function(a){0==Game.highscore&&0==Game.quest?r(l):(i=1E4,c.disable(),l.disable(),g.disable(),m(function(){d.world.setScene(new IngameScene(d.world,
a))}))},r=function(){i=1E4;c.disable();l.disable();g.disable();m(function(){d.world.setScene(new HowtoScene(d.world))})},s=function(){(new TWEEN.Tween(b.position)).to({y:10},1E3).easing(TWEEN.Easing.Cubic.Out).onComplete(function(){}).start();(new TWEEN.Tween(c.position)).to({x:d.world.width/2},1E3).easing(TWEEN.Easing.Back.Out).start();(new TWEEN.Tween(t.position)).to({y:0},1E3).delay(250).easing(TWEEN.Easing.Cubic.Out).start();(new TWEEN.Tween(f.position)).to({y:d.world.height-4},1E3).delay(250).easing(TWEEN.Easing.Cubic.Out).start();
(new TWEEN.Tween(l.position)).to({x:d.world.width/2},1E3).easing(TWEEN.Easing.Back.Out).delay(250).onComplete(function(){t.enable();c.enable();l.enable();g.enable()}).start();(new TWEEN.Tween(g.position)).to({x:d.world.width/2},1E3).easing(TWEEN.Easing.Back.Out).delay(250).start()},m=function(a){(new TWEEN.Tween(b.position)).to({y:-320},1E3).easing(TWEEN.Easing.Cubic.In).onComplete(function(){}).start();(new TWEEN.Tween(t.position)).to({y:-80},1E3).easing(TWEEN.Easing.Cubic.In).start();(new TWEEN.Tween(f.position)).to({y:d.world.height+
1.5*f.height},1E3).delay(250).easing(TWEEN.Easing.Cubic.In).start();(new TWEEN.Tween(c.position)).to({x:-160},1E3).easing(TWEEN.Easing.Back.In).start();(new TWEEN.Tween(l.position)).to({x:480},1E3).easing(TWEEN.Easing.Back.In).delay(250).onComplete(function(){a&&a()}).start();(new TWEEN.Tween(g.position)).to({x:-160},1E3).easing(TWEEN.Easing.Back.In).delay(250).start()}}StartScene.prototype=Object.create(K.Scene.prototype);StartScene.prototype.constructor=StartScene;var GameConfig={MORE_BUTTON_URL:"http://aheadware.com/html5games-portfolio/"},Game={player:null,aim:null,stats:null,highscore:0,quest:0,world:null,audioLoaded:!1,audioEnabled:!0,device:null,load:function(){this.device=new K.Utils.Device;var e="assets/yummies.json,assets/background.jpg,assets/startscreen.json,assets/howtoscreen.json,assets/overlay.jpg,assets/startFont.xml,assets/scoreParticleFont.xml,assets/howtoPolaroidFont.xml,assets/scoreFont.xml".split(","),d=new PIXI.AssetLoader(e),b=K.Utils.createCanvas(),
a=new K.CustomProgressBar({canvas:b,numItems:e.length,autorun:!this.device.desktop&&K.Utils.fullscreenAvailable()?!1:!0,onReady:function(){document.body.removeChild(b);Game.init.bind(Game).call()}});document.body.appendChild(b);this.device.desktop||K.Utils.setOnResizeHandler(function(){K.Utils.stretchCanvas(b)});d.onProgress=function(){a.step()};d.onComplete=a.enableOnClick;d.load()},saveHighscore:function(e){if(e>this.highscore){this.highscore=e;try{K.Utils.save("yummy-highscore",this.highscore)}catch(d){}return!0}return!1},
saveQuest:function(e){var d=new Quest(1);if(e>this.quest){this.quest=Math.min(e,d.total-1);try{K.Utils.save("yummy-quest",this.quest)}catch(b){}return!0}return!1},loadQuest:function(){var e=K.Utils.load("yummy-quest");e&&(this.quest=e)},loadHighscore:function(){var e=K.Utils.load("yummy-highscore");e&&(this.highscore=e)},init:function(){var e=K.Utils.createCanvas();document.body.appendChild(e);this.device.desktop||(K.Utils.startFullscreen(e),K.Utils.setOnResizeHandler(function(){K.Utils.stretchCanvas(e)}));
this.loadHighscore();this.loadQuest();this.world=new K.World({canvas:e,stats:!1});this.world.stage.addChild(new PIXI.Sprite(PIXI.Texture.fromImage("assets/background.jpg")));this.world.setScene(new StartScene(this.world));this.world.run()}};
